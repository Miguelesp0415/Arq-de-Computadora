#include <Adafruit_NeoPixel.h> 

Adafruit_NeoPixel LED_RGB(1, 48, NEO_GRBW + NEO_KHZ800); 

int LED_PIN = 2; 

int estadoLuz = 1; 
int pasoActual = 0; 
unsigned long tiempoUltimoCambio = 0;
const int duracionPaso = 5; 

void colorearRGB(int red, int green, int blue) {
  LED_RGB.setPixelColor(0, (uint32_t(LED_RGB.Color(red, green, blue))));
  LED_RGB.show();
}

void setup() {
  LED_RGB.begin();
  LED_RGB.setBrightness(150);
  colorearRGB(0,0,0);
  pinMode(LED_PIN, OUTPUT);
  digitalWrite(LED_PIN, LOW);
}

void loop() {
  
  if (millis() - tiempoUltimoCambio < duracionPaso) {
    return; 
  }
  tiempoUltimoCambio = millis(); 

  int r = 0; 
  int g = 0; 
  int b = 0;
  
  if (estadoLuz == 1) {
    r = 0; g = 0; b = 255; 
    pasoActual++; 

    if (pasoActual >= 255) {
      pasoActual = 255; 
      estadoLuz = 2; 
    }
  }
  else if (estadoLuz == 2) {
    r = 0; g = 255; b = 0; 
    pasoActual--; 

    if (pasoActual <= 0) {
      pasoActual = 0;
      estadoLuz = 1; 
    }
  }
  
  int brilloActual = pasoActual;
  
  analogWrite(LED_PIN, brilloActual); 
  
  LED_RGB.setPixelColor(0, LED_RGB.Color(r, g, b));
  LED_RGB.setBrightness(brilloActual); 
  LED_RGB.show();
}
